{"version":3,"sources":["D2App/pages/Page.module.css","D2App/pages/ValidationRulesAnalysis/ValidationRulesDetails/ValidationRulesDetails.module.css","D2App/components/MaxResultsAlertBar/MaxResultsAlertBar.module.css","D2App/components/PageHeader/PageHeader.module.css","D2App/components/DownloadAs/DownloadAs.module.css","D2App/components/AvailableOrganisationUnitsTree/AvailableOrganisationUnitsTree.module.css","D2App/pages/OutlierDetection/Form/ZScoreFields.module.css","D2App/pages/OutlierDetection/OutlierAnalysisTable/OutlierAnalysisTable.module.css","D2App/pages/ValidationRulesAnalysis/Form.module.css","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysisTable/ElementRow.module.css","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysisTable/TableCellContent.module.css","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysisTable/ValidationRulesAnalysisTable.module.css","D2App/pages/Overview/grid-section/GridSection.module.css","D2App/pages/Overview/Overview.module.css","D2App/components/Sidebar/SidebarItem.module.css","D2App/components/App/App.module.css","D2App/locales/index.js","D2App/components/MaxResultsAlertBar/MaxResultsAlertBar.js","D2App/components/DocsLink/DocsLink.js","D2App/components/PageHeader/PageHeader.js","D2App/components/Sidebar/SidebarContext.js","D2App/server.conf.js","D2App/pages/FollowUpAnalysis/convert-element-from-api-response.js","D2App/pages/FollowUpAnalysis/convert-element-to-un-followup-request.js","D2App/components/DownloadAs/use-hrefs.js","D2App/components/DownloadAs/DownloadAs.js","D2App/components/FormattedNumber/FormattedNumber.js","D2App/pages/PageStyles.js","D2App/pages/FollowUpAnalysis/FollowUpAnalysisTable/ElementRow.js","D2App/pages/FollowUpAnalysis/FollowUpAnalysisTable/FollowUpAnalysisTable.js","D2App/components/AvailableDataSetsSelect/AvailableDataSetsSelect.js","D2App/components/AvailableOrganisationUnitsTree/AvailableOrganisationUnitsTree.js","D2App/pages/FollowUpAnalysis/Form.js","D2App/helpers/dates.js","D2App/pages/FollowUpAnalysis/use-form-state.js","D2App/pages/FollowUpAnalysis/FollowUpAnalysis.js","D2App/pages/OutlierDetection/constants.js","D2App/pages/OutlierDetection/convert-element-from-api-response.js","D2App/pages/OutlierDetection/Form/ThresholdField.js","D2App/pages/OutlierDetection/Form/ZScoreFields.js","D2App/pages/OutlierDetection/Form/Form.js","D2App/pages/OutlierDetection/OutlierAnalysisTable/ElementRow.js","D2App/pages/OutlierDetection/OutlierAnalysisTable/OutlierAnalysisTable.js","D2App/pages/OutlierDetection/use-form-state.js","D2App/pages/OutlierDetection/OutlierDetection.js","D2App/pages/ValidationRulesAnalysis/convert-element-from-api-response.js","D2App/pages/ValidationRulesAnalysis/ValidationRuleGroupsSelect.js","D2App/pages/ValidationRulesAnalysis/Form.js","D2App/pages/ValidationRulesAnalysis/use-form-state.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesDetails/Result.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesDetails/Section.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesDetails/ValidationRulesDetails.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysisTable/TableCellContent.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysisTable/ElementRow.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysisTable/ValidationRulesAnalysisTable.js","D2App/pages/ValidationRulesAnalysis/ValidationRulesAnalysis.js","D2App/pages/sections.conf.js","D2App/pages/Overview/grid-section/GridSection.js","D2App/pages/Overview/Overview.js","D2App/components/AppRouter/NoMatch.js","D2App/components/AppRouter/AppRouter.js","D2App/components/Sidebar/SidebarItem.js","D2App/components/Sidebar/Sidebar.js","D2App/components/App/use-sidebar.js","D2App/components/App/App.js","D2App/theme.js","D2App/App.js"],"names":["module","exports","namespace","i18n","addResources","arTranslations","ar_IQTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","MaxResultsAlertBar","show","React","createElement","Paper","className","styles","alertBar","t","DocsLink","sectionKey","serverVersion","useConfig","docsVersion","major","minor","tag","getDocsVersion","docsKey","getDocsKeyForSection","IconButton","iconStyle","color","colors","blue700","href","target","rel","tooltip","tooltipPosition","iconClassName","PageHeader","title","onBack","header","onClick","FontIcon","headerTitle","SidebarContext","createContext","useSidebar","useContext","SidebarProvider","Provider","apiConf","endpoints","validationRulesReport","reportAnalysis","results","analysis","limit","convertElementFromApiResponse","e","key","aoc","coc","pe","ou","de","attributeOptionComboId","categoryOptionComboId","periodId","period","peName","organisationUnitId","organisation","ouName","dataElementId","dataElement","deName","min","max","value","Number","parseFloat","comment","marked","convertElementToUnFollowupRequest","orgUnit","categoryOptionCombo","attributeOptionCombo","followup","useHrefs","endpoint","fileTypes","queryStr","baseUrl","apiVersion","timestamp","Date","now","endpointUrl","replace","reduce","acc","type","downloadUrl","DownloadAs","hrefs","downloadAs","includes","pdf","download","xls","csv","defaultProps","FormattedNumber","minimumFractionDigits","maximumFractionDigits","Intl","NumberFormat","language","format","pageStyles","inputForm","width","iconColor","fill","cursorStyle","cursor","ElementRow","element","onCheckboxToggle","onShowComment","TableRow","TableRowColumn","cssPageStyles","numericalRow","centerFlex","checkboxWrapper","Checkbox","checked","onCheck","jsPageStyles","center","style","FollowUpAnalysisTable","elements","loading","onUnfollow","commentVisible","setCommentVisible","useState","setComment","handleCloseCommentDialog","oneChecked","some","Dialog","actions","FlatButton","label","primary","modal","open","onRequestClose","cardHeader","Table","selectable","appTable","TableHeader","displaySelectAll","adjustForCheckbox","enableSelectAll","TableHeaderColumn","TableBody","displayRowCheckbox","stripedRows","map","handleShowComment","classNames","cardFooter","spaceBetween","Button","disabled","Fragment","CircularLoader","small","query","dataSets","resource","params","fields","paging","AvailableDatasetsSelect","selected","onChange","error","data","useDataQuery","MultiSelect","filterable","noMatchText","item","MultiSelectOption","id","displayName","Help","allRootQuery","allRoots","filter","AvailableOrganisationUnitsTree","multiselect","setSelected","Map","organisationUnits","loadingAll","dataAll","errorAll","refetch","lazy","useEffect","_data$data","length","authorities","useUserOrganisationUnits","handleChange","path","s","newSelected","set","delete","values","selectedId","has","wrapper","OrganisationUnitTree","keys","roots","singleSelection","Form","onSubmit","valid","dataSetIds","onDataSetsChange","onOrganisationUnitChange","startDate","onStartDateChange","endDate","onEndDateChange","systemInfo","calendar","formLabel","AvailableDataSetsSelect","datepickers","CalendarInput","onDateSelect","date","locale","mainButton","padWithZeroes","number","count","String","padStart","formatYyyyMmDD","_date$eraYear","eraYear","year","month","day","getCalendarDate","days","getNowInCalendar","add","useFormState","setStartDate","months","setEndDate","setOrganisationUnitId","setDataSetIds","handleStartDateChange","selectedDate","calendarDateString","handleEndDateChange","handleOrganisationUnitChange","handleDataSetsChange","followups","ds","unfollowMutation","FollowUpAnalysis","sidebar","tableVisible","setTableVisible","setElements","noValuesFoundAlert","useAlert","success","successfulUnfollowAlert","duration","errorAlert","message","critical","loadingFollowUpList","fetchFollowUpList","onComplete","followupValues","showTable","onError","unfollow","loadingUnfollow","useDataMutation","hide","formValid","shouldShowMaxResultsAlertBar","Card","card","display","elementKey","async","unfollowups","then","Z_SCORE","MEAN_ABS_DEV","ALGORITHM_TO_LABEL_MAP","MOD_Z_SCORE","MIN_MAX","Z_SCORE_ALGORITHMS","Set","DEFAULT_ALGORITHM","DEFAULT_ORDER_BY","getElementDisplayName","str","cocName","aocName","ThresholdField","threshold","SelectField","floatingLabelText","MenuItem","primaryText","ZScoreFields","algorithm","showAdvancedZScoreFields","onToggleAdvancedZScoreFields","orderBy","onOrderByChange","dataStartDate","dataEndDate","onDataStartDateChange","onDataEndDateChange","secondary","toggleBtn","optionalDatepickerContainer","clearable","onAlgorithmChange","onThresholdChange","onDataSetsOnChange","maxResults","onMaxResultsChange","Object","algo","isZScoreAlgorithm","onToggleCheckbox","zScore","absDev","stdDev","mean","median","lowerBound","upperBound","OutlierAnalyisTable","csvQueryStr","downloadLink","outlierAnalysisTable","end","organisationUnitIds","setOrganisationUnitIds","setAlgorithm","setShowAdvancedZScoreFields","setThreshold","setOrderBy","setDataStartDate","setDataEndDate","setMaxResults","handleAlgorithmChange","event","index","handleToggleAdvancedZScoreFields","handleThresholdChange","handleOrderByChange","handleDataStartDateChange","handleDataEndDateChange","handleMaxResultsChange","outliers","markOutlierMutation","OutlierDetection","setCsvQueryStr","successfulMarkAlert","fetchOutliers","outlierValues","markOutlier","console","log","queryString","stringify","currentElement","find","newMarked","generateElementKey","validationRuleId","attributeOptionComboDisplayName","organisationUnitDisplayName","periodDisplayName","importance","validationRule","validationRuleDescription","leftValue","leftSideValue","operator","rightValue","rightSideValue","ALL_VALIDATION_RULE_GROUPS_ID","ALL_VALIDATION_RULE_GROUPS_OPTION","validationRuleGroups","ValidationRuleGroupsSelect","SingleSelectField","SingleSelectOption","nsSeparator","onValidationRuleGroupChange","sendNotfications","onSendNotificationsChange","persistNewResults","onPersistNewResultsChange","checkboxes","validationRuleGroupId","setValidationRuleGroupId","setSendNotifications","setPersistNewResults","handleValidationRuleGroupChange","handleSendNotificationsChange","handlePersistNewResultsChange","Result","rule","sectionBox","sectionTitle","sectionSubTitle","displayDescription","Section","side","classNameRow","right","name","noData","expression","ValidationRulesDetails","detailsVisible","setDetailsVisible","fetchDetails","variables","handleModalOpen","handleModalClose","Tooltip","content","openDelay","closeDelay","icon","Modal","onClose","ModalTitle","ModalContent","leftSide","rightSide","ModalActions","ButtonStrip","TableCellContent","size","children","cx","tableCellContent","shouldDisplayAttributeOptionCombo","ValidationRulesAnalysisTable","validationTable","fixedHeader","bodyStyle","overflowX","validationMutation","sections","component","validationPassedAlert","validate","notification","persist","vrg","info","description","actionText","docs","section","obj","GridSection","PureComponent","render","Link","link","to","this","props","gridElement","gridTitleBar","gridTitleDescription","gridIcon","gridDescription","gridActionText","PropTypes","shape","string","isRequired","defineProperty","enumerable","configurable","writable","Overview","gridContainer","NoMatch","location","pathname","_defineProperty","object","AppRouter","routes","Route","exact","Page","push","Switch","SidebarItem","history","useHistory","isActive","useRouteMatch","createHref","search","hash","sidebarItem","active","Sidebar","Menu","visible","setVisible","App","listen","containerClassName","classnames","container","containerWithSidebar","contentWrapper","theme","spacing","Spacing","fontFamily","palette","primary1Color","primary2Color","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","orangeA200","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","AppWrapper","CssVariables","spacers","MuiThemeProvider","appTheme","HashRouter"],"mappings":"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","file":"static/js/app.102c4eab.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Page_card__2YJUQ\",\"mainButton\":\"Page_mainButton__3ZqEW\",\"appTable\":\"Page_appTable__jOHgy\",\"numericalRow\":\"Page_numericalRow__FaqX_\",\"right\":\"Page_right__2IgFz\",\"center\":\"Page_center__2X94F\",\"centerFlex\":\"Page_centerFlex__7_iZ7\",\"pageHeader\":\"Page_pageHeader__HmeVS\",\"cardHeader\":\"Page_cardHeader__2RRDB\",\"cardFooter\":\"Page_cardFooter__IQAZb\",\"spaceBetween\":\"Page_spaceBetween__13D7y\",\"end\":\"Page_end__uY7Dd\",\"formLabel\":\"Page_formLabel__1UsDH\",\"checkboxWrapper\":\"Page_checkboxWrapper__JAojq\",\"datepickers\":\"Page_datepickers__1y8th\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sectionBox\":\"ValidationRulesDetails_sectionBox__2d5TC\",\"sectionTitle\":\"ValidationRulesDetails_sectionTitle__2XPK4\",\"sectionSubTitle\":\"ValidationRulesDetails_sectionSubTitle__2ipEu\",\"noData\":\"ValidationRulesDetails_noData__2SXYM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alertBar\":\"MaxResultsAlertBar_alertBar__2GmaS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"PageHeader_header__1jM0V\",\"headerTitle\":\"PageHeader_headerTitle__1KEEp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"downloadAs\":\"DownloadAs_downloadAs__2llIV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AvailableOrganisationUnitsTree_wrapper__1GxRZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggleBtn\":\"ZScoreFields_toggleBtn__2tslH\",\"optionalDatepickerContainer\":\"ZScoreFields_optionalDatepickerContainer__1zHga\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outlierAnalysisTable\":\"OutlierAnalysisTable_outlierAnalysisTable__2jiQP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxes\":\"Form_checkboxes__KN4B5\",\"datepickers\":\"Form_datepickers__1Kts6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"operator\":\"ElementRow_operator__pOKg5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableCellContent\":\"TableCellContent_tableCellContent__1s3wz\",\"tableCellContent-narrow\":\"TableCellContent_tableCellContent-narrow__2zlhv\",\"tableCellContent-medium\":\"TableCellContent_tableCellContent-medium__2sEcd\",\"tableCellContent-wide\":\"TableCellContent_tableCellContent-wide__WtVIn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"validationTable\":\"ValidationRulesAnalysisTable_validationTable__3-ha4\",\"operator\":\"ValidationRulesAnalysisTable_operator__p9vPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"GridSection_link__1wOeA\",\"gridElement\":\"GridSection_gridElement__13uMv\",\"gridTitleBar\":\"GridSection_gridTitleBar__2yKRT\",\"gridTitleDescription\":\"GridSection_gridTitleDescription__1MJBK\",\"gridIcon\":\"GridSection_gridIcon__1Zrzs\",\"gridDescription\":\"GridSection_gridDescription__9-Td7\",\"gridActionText\":\"GridSection_gridActionText__frHQs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridContainer\":\"Overview_gridContainer__1j9lQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarItem\":\"SidebarItem_sidebarItem__1m_xH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1rmxQ\",\"containerWithSidebar\":\"App_containerWithSidebar__1Hbl7\",\"sidebar\":\"App_sidebar__LDzrw\",\"content\":\"App_content__3ZxSB\",\"contentWrapper\":\"App_contentWrapper__rsw_W\"};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import i18n from '@dhis2/d2-i18n';\nimport { Paper } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './MaxResultsAlertBar.module.css';\n\nconst MaxResultsAlertBar = ({\n  show\n}) => {\n  if (!show) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Paper, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.alertBar\n  }, i18n.t('More than 500 values found, please narrow the search to see all')));\n};\n\nMaxResultsAlertBar.propTypes = {\n  show: PropTypes.bool.isRequired\n};\nexport default MaxResultsAlertBar;","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport { IconButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getDocsKeyForSection } from '../../pages/sections.conf.js';\n\nconst getDocsVersion = ({\n  major,\n  minor,\n  tag\n}) => {\n  if (tag === 'SNAPSHOT') {\n    return 'master';\n  }\n\n  return `${major}${minor}`;\n};\n\nconst DocsLink = ({\n  sectionKey\n}) => {\n  const {\n    serverVersion\n  } = useConfig();\n  const docsVersion = getDocsVersion(serverVersion);\n  const docsKey = getDocsKeyForSection(sectionKey);\n  return /*#__PURE__*/React.createElement(IconButton, {\n    className: \"helper-icon\",\n    iconStyle: {\n      color: colors.blue700\n    },\n    href: `https://docs.dhis2.org/en/use/user-guides/dhis-core-version-${docsVersion}/collecting-data/data-quality.html#${docsKey}`,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    tooltip: i18n.t('Open user guide'),\n    tooltipPosition: \"bottom-center\",\n    iconClassName: \"material-icons\"\n  }, \"help\");\n};\n\nDocsLink.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DocsLink;","import { FontIcon, IconButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport DocsLink from '../DocsLink/DocsLink.js';\nimport styles from './PageHeader.module.css';\n\nconst PageHeader = ({\n  title,\n  onBack,\n  sectionKey\n}) => /*#__PURE__*/React.createElement(\"header\", {\n  className: styles.header\n}, onBack && /*#__PURE__*/React.createElement(IconButton, {\n  onClick: onBack\n}, /*#__PURE__*/React.createElement(FontIcon, {\n  className: 'material-icons'\n}, \"arrow_back\")), /*#__PURE__*/React.createElement(\"h1\", {\n  className: styles.headerTitle\n}, title), sectionKey && /*#__PURE__*/React.createElement(DocsLink, {\n  sectionKey: sectionKey\n}));\n\nPageHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n  sectionKey: PropTypes.string,\n  onBack: PropTypes.func\n};\nexport default PageHeader;","import React, { useContext } from 'react';\nconst SidebarContext = /*#__PURE__*/React.createContext();\nexport const useSidebar = () => useContext(SidebarContext);\nexport const SidebarProvider = SidebarContext.Provider;","export const apiConf = {\n  endpoints: {\n    validationRulesReport: '/dataAnalysis/validationRules/report',\n    reportAnalysis: '/dataAnalysis/report'\n  },\n  results: {\n    analysis: {\n      limit: 500\n    }\n  }\n};\nexport default apiConf;","const convertElementFromApiResponse = e => ({\n  key: `${e.aoc}-${e.coc}-${e.pe}-${e.ou}-${e.de}`,\n  attributeOptionComboId: e.aoc,\n  categoryOptionComboId: e.coc,\n  periodId: e.pe,\n  period: e.peName,\n  organisationUnitId: e.ou,\n  organisation: e.ouName,\n  dataElementId: e.de,\n  dataElement: e.deName,\n  min: e.min,\n  max: e.max,\n  value: Number.parseFloat(e.value, 10),\n  comment: e.comment,\n  marked: false\n});\n\nexport default convertElementFromApiResponse;","const convertElementToUnFollowupRequest = e => ({\n  dataElement: e.dataElementId,\n  period: e.periodId,\n  orgUnit: e.organisationUnitId,\n  categoryOptionCombo: e.categoryOptionComboId || null,\n  attributeOptionCombo: e.attributeOptionComboId || null,\n  followup: false\n});\n\nexport default convertElementToUnFollowupRequest;","import { useConfig } from '@dhis2/app-runtime';\n\nconst useHrefs = ({\n  endpoint,\n  fileTypes,\n  queryStr\n}) => {\n  const {\n    baseUrl,\n    apiVersion\n  } = useConfig();\n  const timestamp = Date.now(); // The new outlierDetection endpoint produces the correct report\n  // based on query params, but older endpoints only take a timestamp\n\n  queryStr = queryStr || `t=${timestamp}`; // removing leading slash for endpoint to make sure it works whether it's configured with slash or not\n\n  const sanitisedEndpoint = endpoint === null || endpoint === void 0 ? void 0 : endpoint.replace(/^\\//, '');\n  const endpointUrl = `${baseUrl}/api/${apiVersion}/${sanitisedEndpoint}`;\n  return fileTypes.reduce((acc, type) => {\n    const downloadUrl = `${endpointUrl}.${type}?${queryStr}`;\n    acc[type] = downloadUrl;\n    return acc;\n  }, {});\n};\n\nexport default useHrefs;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './DownloadAs.module.css';\nimport useHrefs from './use-hrefs.js';\n\nconst DownloadAs = ({\n  endpoint,\n  fileTypes,\n  queryStr\n}) => {\n  const hrefs = useHrefs({\n    endpoint,\n    fileTypes,\n    queryStr\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadAs\n  }, fileTypes.includes('pdf') && /*#__PURE__*/React.createElement(\"a\", {\n    href: hrefs.pdf,\n    download: true\n  }, i18n.t('Download as PDF')), fileTypes.includes('xls') && /*#__PURE__*/React.createElement(\"a\", {\n    href: hrefs.xls,\n    download: true\n  }, i18n.t('Download as XLS')), fileTypes.includes('csv') && /*#__PURE__*/React.createElement(\"a\", {\n    href: hrefs.csv,\n    download: true\n  }, i18n.t('Download as CSV')));\n};\n\nDownloadAs.propTypes = {\n  endpoint: PropTypes.string.isRequired,\n  fileTypes: PropTypes.arrayOf(PropTypes.oneOf(['pdf', 'xls', 'csv'])),\n  queryStr: PropTypes.string\n};\nDownloadAs.defaultProps = {\n  fileTypes: ['pdf', 'xls', 'csv']\n};\nexport default DownloadAs;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst FormattedNumber = ({\n  value,\n  minimumFractionDigits,\n  maximumFractionDigits\n}) => /*#__PURE__*/React.createElement(\"span\", null, new Intl.NumberFormat(i18n.language, {\n  minimumFractionDigits,\n  maximumFractionDigits\n}).format(value));\n\nFormattedNumber.defaultProps = {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 0\n};\nFormattedNumber.propTypes = {\n  value: PropTypes.number.isRequired,\n  maximumFractionDigits: PropTypes.number,\n  minimumFractionDigits: PropTypes.number\n};\nexport default FormattedNumber;","const pageStyles = {\n  inputForm: {\n    width: '100%'\n  },\n  iconColor: {\n    fill: '#ff9900'\n  },\n  cursorStyle: {\n    cursor: 'pointer'\n  }\n};\nexport default pageStyles;","import { Checkbox, TableRow, TableRowColumn, FontIcon, IconButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../../components/FormattedNumber/FormattedNumber.js';\nimport cssPageStyles from '../../Page.module.css';\nimport jsPageStyles from '../../PageStyles.js';\n\nconst ElementRow = ({\n  element,\n  onCheckboxToggle,\n  onShowComment\n}) => /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableRowColumn, null, element.dataElement), /*#__PURE__*/React.createElement(TableRowColumn, null, element.organisation), /*#__PURE__*/React.createElement(TableRowColumn, null, element.period), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, typeof element.min === 'number' && /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.min\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.value\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, typeof element.max === 'number' && /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.max\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.centerFlex\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: cssPageStyles.checkboxWrapper\n}, /*#__PURE__*/React.createElement(Checkbox, {\n  checked: element.marked,\n  onCheck: onCheckboxToggle,\n  iconStyle: jsPageStyles.iconColor\n}))), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.center\n}, element.comment && /*#__PURE__*/React.createElement(IconButton, {\n  onClick: onShowComment\n}, /*#__PURE__*/React.createElement(FontIcon, {\n  className: 'material-icons',\n  style: jsPageStyles.cursorStyle\n}, \"speaker_notes\"))));\n\nElementRow.propTypes = {\n  element: PropTypes.object.isRequired,\n  onCheckboxToggle: PropTypes.func.isRequired,\n  onShowComment: PropTypes.func.isRequired\n};\nexport default ElementRow;","import i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader } from '@dhis2/ui';\nimport classNames from 'classnames';\nimport { Table, TableBody, TableHeader, TableHeaderColumn, TableRow, Dialog, FlatButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport DownloadAs from '../../../components/DownloadAs/DownloadAs.js';\nimport { apiConf } from '../../../server.conf.js';\nimport cssPageStyles from '../../Page.module.css';\nimport ElementRow from './ElementRow.js';\n\nconst FollowUpAnalysisTable = ({\n  elements,\n  loading,\n  onCheckboxToggle,\n  onUnfollow\n}) => {\n  const [commentVisible, setCommentVisible] = useState(false);\n  const [comment, setComment] = useState(null);\n\n  const handleCloseCommentDialog = () => {\n    setCommentVisible(false);\n  };\n\n  const handleShowComment = element => {\n    setComment(element.comment);\n    setCommentVisible(true);\n  };\n\n  const oneChecked = elements.some(element => element.marked);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Dialog, {\n    title: i18n.t('Comment'),\n    actions: [/*#__PURE__*/React.createElement(FlatButton, {\n      key: \"Close\",\n      label: i18n.t('Close'),\n      primary: true,\n      onClick: handleCloseCommentDialog\n    })],\n    modal: false,\n    open: commentVisible,\n    onRequestClose: handleCloseCommentDialog\n  }, /*#__PURE__*/React.createElement(\"div\", null, comment)), /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.cardHeader\n  }, /*#__PURE__*/React.createElement(DownloadAs, {\n    endpoint: apiConf.endpoints.reportAnalysis\n  })), /*#__PURE__*/React.createElement(Table, {\n    selectable: false,\n    className: cssPageStyles.appTable\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    displaySelectAll: false,\n    adjustForCheckbox: false,\n    enableSelectAll: false\n  }, /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableHeaderColumn, null, i18n.t('Data Element')), /*#__PURE__*/React.createElement(TableHeaderColumn, null, i18n.t('Organisation Unit')), /*#__PURE__*/React.createElement(TableHeaderColumn, null, i18n.t('Period')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Min')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Value')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Max')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.center\n  }, i18n.t('Unfollow')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.center\n  }, i18n.t('Comment')))), /*#__PURE__*/React.createElement(TableBody, {\n    displayRowCheckbox: false,\n    stripedRows: false\n  }, elements.map(element => /*#__PURE__*/React.createElement(ElementRow, {\n    key: element.key,\n    element: element,\n    onCheckboxToggle: () => onCheckboxToggle(element.key),\n    onShowComment: () => handleShowComment(element)\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(cssPageStyles.cardFooter, cssPageStyles.spaceBetween)\n  }, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || !oneChecked,\n    onClick: onUnfollow\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Unfollowing...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Unfollow')), /*#__PURE__*/React.createElement(DownloadAs, {\n    endpoint: apiConf.endpoints.reportAnalysis\n  })));\n};\n\nFollowUpAnalysisTable.propTypes = {\n  elements: PropTypes.array.isRequired,\n  loading: PropTypes.bool.isRequired,\n  onCheckboxToggle: PropTypes.func.isRequired,\n  onUnfollow: PropTypes.func.isRequired\n};\nexport default FollowUpAnalysisTable;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { MultiSelect, MultiSelectOption, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst query = {\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName',\n      paging: false\n    }\n  }\n};\n\nconst AvailableDatasetsSelect = ({\n  selected,\n  onChange\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n  const dataSets = data === null || data === void 0 ? void 0 : data.dataSets.dataSets;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MultiSelect, {\n    error: error,\n    loading: loading,\n    filterable: true,\n    noMatchText: i18n.t('No match found'),\n    onChange: onChange,\n    selected: selected\n  }, dataSets === null || dataSets === void 0 ? void 0 : dataSets.map(item => /*#__PURE__*/React.createElement(MultiSelectOption, {\n    key: item.id,\n    value: item.id,\n    label: item.displayName\n  }))), error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, i18n.t('Error loading datasets.')));\n};\n\nAvailableDatasetsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selected: PropTypes.array\n};\nexport default AvailableDatasetsSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { OrganisationUnitTree, CircularLoader, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport styles from './AvailableOrganisationUnitsTree.module.css';\nconst allRootQuery = {\n  allRoots: {\n    resource: 'organisationUnits',\n    params: {\n      filter: 'level:eq:1',\n      fields: 'id',\n      paging: 'false'\n    }\n  }\n};\nconst query = {\n  data: {\n    resource: 'me',\n    params: {\n      fields: 'organisationUnits, authorities'\n    }\n  }\n};\n\nconst useUserOrganisationUnits = () => {\n  const {\n    loading,\n    data,\n    error\n  } = useDataQuery(query);\n  const {\n    loading: loadingAll,\n    data: dataAll,\n    error: errorAll,\n    refetch\n  } = useDataQuery(allRootQuery, {\n    lazy: true\n  });\n  useEffect(() => {\n    var _data$data;\n\n    if (!(data !== null && data !== void 0 && data.data.organisationUnits.length) && data !== null && data !== void 0 && (_data$data = data.data) !== null && _data$data !== void 0 && _data$data.authorities.includes('ALL')) {\n      //fetch all orgs\n      refetch();\n    }\n  }, [data]);\n  return {\n    loading: loadingAll || loading,\n    organisationUnits: (dataAll === null || dataAll === void 0 ? void 0 : dataAll.allRoots.organisationUnits) || (data === null || data === void 0 ? void 0 : data.data.organisationUnits),\n    error: errorAll || error\n  };\n};\n\nconst AvailableOrganisationUnitsTree = ({\n  multiselect = false,\n  onChange\n}) => {\n  const [selected, setSelected] = useState(new Map());\n  const {\n    loading,\n    organisationUnits,\n    error\n  } = useUserOrganisationUnits();\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CircularLoader, null);\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, i18n.t('Something went wrong whilst loading your organisation units.'));\n  }\n\n  if (organisationUnits.length === 0) {\n    return /*#__PURE__*/React.createElement(\"p\", null, i18n.t('You do not have access to any organisation units.'));\n  }\n\n  const handleOrgUnitClickSingle = ({\n    id,\n    path\n  }) => {\n    let selectedId = id;\n\n    if (selected.has(path)) {\n      //deselect\n      selectedId = null;\n      setSelected(new Map());\n    } else {\n      setSelected(new Map().set(path, id));\n    }\n\n    if (onChange) {\n      onChange(selectedId);\n    }\n  };\n\n  const handleOrgUnitClickMulti = ({\n    id,\n    path,\n    selected: s\n  }) => {\n    const newSelected = new Map(selected);\n\n    if (s.includes(path)) {\n      newSelected.set(path, id);\n    } else {\n      newSelected.delete(path);\n    }\n\n    setSelected(newSelected);\n\n    if (onChange) {\n      onChange([...newSelected.values()]);\n    }\n  };\n\n  const handleChange = multiselect ? handleOrgUnitClickMulti : handleOrgUnitClickSingle;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.wrapper\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    selected: [...selected.keys()],\n    roots: organisationUnits.map(ou => ou.id),\n    singleSelection: !multiselect,\n    onChange: handleChange\n  }));\n};\n\nAvailableOrganisationUnitsTree.propTypes = {\n  multiselect: PropTypes.bool,\n  onChange: PropTypes.func\n};\nexport default AvailableOrganisationUnitsTree;","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, CalendarInput } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport AvailableDataSetsSelect from '../../components/AvailableDataSetsSelect/AvailableDataSetsSelect.js';\nimport AvailableOrganisationUnitsTree from '../../components/AvailableOrganisationUnitsTree/AvailableOrganisationUnitsTree.js';\nimport cssPageStyles from '../Page.module.css';\n\nconst Form = ({\n  onSubmit,\n  valid,\n  loading,\n  dataSetIds,\n  onDataSetsChange,\n  onOrganisationUnitChange,\n  startDate,\n  onStartDateChange,\n  endDate,\n  onEndDateChange\n}) => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 col-lg-4\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: cssPageStyles.formLabel\n  }, i18n.t('Data Set')), /*#__PURE__*/React.createElement(AvailableDataSetsSelect, {\n    selected: dataSetIds,\n    onChange: onDataSetsChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 col-lg-4\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: cssPageStyles.formLabel\n  }, i18n.t('Parent organisation unit')), /*#__PURE__*/React.createElement(AvailableOrganisationUnitsTree, {\n    onChange: onOrganisationUnitChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 col-lg-4\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.datepickers\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onStartDateChange,\n    date: startDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('Start date')\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.datepickers\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onEndDateChange,\n    date: endDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('End date')\n  })))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    className: cssPageStyles.mainButton,\n    disabled: !valid || loading,\n    onClick: onSubmit\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Processing...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Follow up')));\n};\n\nForm.propTypes = {\n  dataSetIds: PropTypes.array.isRequired,\n  endDate: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  startDate: PropTypes.string.isRequired,\n  valid: PropTypes.bool.isRequired,\n  onDataSetsChange: PropTypes.func.isRequired,\n  onEndDateChange: PropTypes.func.isRequired,\n  onOrganisationUnitChange: PropTypes.func.isRequired,\n  onStartDateChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n};\nexport default Form;","import { getNowInCalendar } from '@dhis2/multi-calendar-dates';\n\nconst padWithZeroes = (number, count = 2) => String(number).padStart(count, '0');\n\nexport const formatYyyyMmDD = date => {\n  var _date$eraYear;\n\n  const year = (_date$eraYear = date.eraYear) !== null && _date$eraYear !== void 0 ? _date$eraYear : date.year;\n  const month = padWithZeroes(date.month);\n  const dayString = padWithZeroes(date.day);\n  return `${year}-${month}-${dayString}`;\n};\nexport const getCalendarDate = (calendar, period = {\n  days: 0\n}) => {\n  const now = getNowInCalendar(calendar).add(period);\n  return formatYyyyMmDD(now);\n};","import { useConfig } from '@dhis2/app-runtime';\nimport { useState } from 'react';\nimport { getCalendarDate } from '../../helpers/dates.js';\n\nconst useFormState = () => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  const [startDate, setStartDate] = useState(getCalendarDate(calendar, {\n    months: -3\n  }));\n  const [endDate, setEndDate] = useState(getCalendarDate(calendar));\n  const [organisationUnitId, setOrganisationUnitId] = useState(null);\n  const [dataSetIds, setDataSetIds] = useState([]);\n\n  const handleStartDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setStartDate(date);\n  };\n\n  const handleEndDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setEndDate(date);\n  };\n\n  const handleDataSetsChange = ({\n    selected\n  }) => {\n    setDataSetIds(selected);\n  };\n\n  return {\n    startDate,\n    handleStartDateChange,\n    endDate,\n    handleEndDateChange,\n    organisationUnitId,\n    handleOrganisationUnitChange: setOrganisationUnitId,\n    dataSetIds,\n    handleDataSetsChange\n  };\n};\n\nexport default useFormState;","import { useDataQuery, useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport MaxResultsAlertBar from '../../components/MaxResultsAlertBar/MaxResultsAlertBar.js';\nimport PageHeader from '../../components/PageHeader/PageHeader.js';\nimport { useSidebar } from '../../components/Sidebar/SidebarContext.js';\nimport { apiConf } from '../../server.conf.js';\nimport cssPageStyles from '../Page.module.css';\nimport convertElementFromApiResponse from './convert-element-from-api-response.js';\nimport convertElementToUnFollowupRequest from './convert-element-to-un-followup-request.js';\nimport FollowUpAnalysisTable from './FollowUpAnalysisTable/FollowUpAnalysisTable.js';\nimport Form from './Form.js';\nimport useFormState from './use-form-state.js';\nconst query = {\n  followups: {\n    resource: 'dataAnalysis/followup',\n    params: ({\n      startDate,\n      endDate,\n      ou,\n      ds\n    }) => ({\n      startDate,\n      endDate,\n      ou,\n      ds\n    })\n  }\n};\nconst unfollowMutation = {\n  resource: 'dataValues/followups',\n  type: 'update',\n  data: ({\n    values\n  }) => ({\n    values\n  })\n};\n\nconst FollowUpAnalysis = ({\n  sectionKey\n}) => {\n  const sidebar = useSidebar();\n  const [tableVisible, setTableVisible] = useState(false);\n  const [elements, setElements] = useState([]);\n  const {\n    startDate,\n    handleStartDateChange,\n    endDate,\n    handleEndDateChange,\n    organisationUnitId,\n    handleOrganisationUnitChange,\n    dataSetIds,\n    handleDataSetsChange\n  } = useFormState();\n  const noValuesFoundAlert = useAlert(i18n.t('No values found'), {\n    success: true\n  });\n  const successfulUnfollowAlert = useAlert(i18n.t('Elements unfollowed'), {\n    success: true,\n    duration: 2000\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => (error === null || error === void 0 ? void 0 : error.message) || i18n.t('An unexpected error happened during analysis'), {\n    critical: true\n  });\n  const {\n    loading: loadingFollowUpList,\n    refetch: fetchFollowUpList\n  } = useDataQuery(query, {\n    lazy: true,\n    onComplete: data => {\n      const elements = data.followups.followupValues.map(convertElementFromApiResponse);\n      setElements(elements);\n\n      if (elements.length > 0) {\n        showTable();\n      } else {\n        noValuesFoundAlert.show();\n      }\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [unfollow, {\n    loading: loadingUnfollow\n  }] = useDataMutation(unfollowMutation, {\n    onComplete: () => {\n      successfulUnfollowAlert.show();\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n\n  const showForm = () => {\n    setTableVisible(false);\n    sidebar.show();\n  };\n\n  const showTable = () => {\n    setTableVisible(true);\n    sidebar.hide();\n  };\n\n  const handleGetFollowUpList = () => {\n    fetchFollowUpList({\n      startDate,\n      endDate,\n      ou: organisationUnitId,\n      ds: dataSetIds\n    });\n  };\n\n  const handleUnfollow = async () => {\n    const unfollowups = elements.filter(element => element.marked);\n    unfollow({\n      values: unfollowups.map(convertElementToUnFollowupRequest)\n    }).then(() => {\n      setElements(elements.filter(element => !unfollowups.includes(element)));\n    });\n  };\n\n  const handleCheckboxToggle = elementKey => {\n    setElements(elements.map(e => {\n      if (e.key === elementKey) {\n        return { ...e,\n          marked: !e.marked\n        };\n      }\n\n      return e;\n    }));\n  };\n\n  const formValid = !!(startDate && endDate && organisationUnitId && dataSetIds.length > 0 && startDate < endDate);\n  const shouldShowMaxResultsAlertBar = tableVisible && elements.length >= apiConf.results.analysis.limit;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18n.t('Follow-Up Analysis'),\n    onBack: tableVisible ? showForm : null,\n    sectionKey: sectionKey\n  }), /*#__PURE__*/React.createElement(MaxResultsAlertBar, {\n    show: shouldShowMaxResultsAlertBar\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: cssPageStyles.card\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: tableVisible ? 'none' : 'block'\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleGetFollowUpList,\n    valid: formValid,\n    loading: loadingFollowUpList,\n    dataSetIds: dataSetIds,\n    onDataSetsChange: handleDataSetsChange,\n    onOrganisationUnitChange: handleOrganisationUnitChange,\n    startDate: startDate,\n    onStartDateChange: handleStartDateChange,\n    endDate: endDate,\n    onEndDateChange: handleEndDateChange\n  })), tableVisible && /*#__PURE__*/React.createElement(FollowUpAnalysisTable, {\n    elements: elements,\n    onCheckboxToggle: handleCheckboxToggle,\n    onUnfollow: handleUnfollow,\n    loading: loadingUnfollow\n  })));\n};\n\nFollowUpAnalysis.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default FollowUpAnalysis;","import i18n from '@dhis2/d2-i18n';\nexport const Z_SCORE = 'Z_SCORE';\nexport const MODIFIED_Z_SCORE = 'MOD_Z_SCORE';\nexport const MIN_MAX = 'MIN_MAX';\nexport const MEAN_ABS_DEV = 'MEAN_ABS_DEV';\nexport const ALGORITHM_TO_LABEL_MAP = {\n  Z_SCORE: i18n.t('Z-score'),\n  MOD_Z_SCORE: i18n.t('Modified Z-score'),\n  MIN_MAX: i18n.t('Min-max values')\n};\nexport const Z_SCORE_ALGORITHMS = new Set([Z_SCORE, MODIFIED_Z_SCORE]);\nexport const DEFAULT_THRESHOLD = 3.0;\nexport const DEFAULT_ALGORITHM = Z_SCORE;\nexport const DEFAULT_MAX_RESULTS = 500;\nexport const DEFAULT_ORDER_BY = MEAN_ABS_DEV;","const getElementDisplayName = e => {\n  let str = e.deName; // In the context of a dataElement, the default COC or AOC means \"none\".\n  // The \"default\" string is not localised, and probably won't ever be.\n  // That is why the conditions below should work in the foreseeable future.\n\n  if (e.cocName !== 'default') {\n    str += ` (${e.cocName})`;\n  }\n\n  if (e.aocName !== 'default') {\n    str += ` (${e.aocName})`;\n  }\n\n  return str;\n};\n\nconst convertElementFromApiResponse = e => ({\n  displayName: getElementDisplayName(e),\n  key: `${e.aoc}-${e.coc}-${e.de}-${e.pe}-${e.ou}`,\n  marked: e.followup,\n  ...e\n});\n\nexport default convertElementFromApiResponse;","import i18n from '@dhis2/d2-i18n';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport jsPageStyles from '../../PageStyles.js';\n\nconst ThresholdField = ({\n  threshold,\n  onChange\n}) => /*#__PURE__*/React.createElement(SelectField, {\n  style: jsPageStyles.inputForm,\n  floatingLabelText: i18n.t('Threshold'),\n  onChange: onChange,\n  value: threshold\n}, /*#__PURE__*/React.createElement(MenuItem, {\n  value: 1,\n  primaryText: \"1.0\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 1.5,\n  primaryText: \"1.5\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 2,\n  primaryText: \"2.0\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 2.5,\n  primaryText: \"2.5\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 3,\n  primaryText: \"3.0\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 3.5,\n  primaryText: \"3.5\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 4,\n  primaryText: \"4.0\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 4.5,\n  primaryText: \"4.5\"\n}), /*#__PURE__*/React.createElement(MenuItem, {\n  value: 5,\n  primaryText: \"5.0\"\n}));\n\nThresholdField.propTypes = {\n  threshold: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default ThresholdField;","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CalendarInput } from '@dhis2/ui';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport jsPageStyles from '../../PageStyles.js';\nimport { Z_SCORE, MEAN_ABS_DEV, ALGORITHM_TO_LABEL_MAP } from '../constants.js';\nimport styles from './ZScoreFields.module.css';\n\nconst ZScoreFields = ({\n  algorithm,\n  showAdvancedZScoreFields,\n  onToggleAdvancedZScoreFields,\n  orderBy,\n  onOrderByChange,\n  dataStartDate,\n  dataEndDate,\n  onDataStartDateChange,\n  onDataEndDateChange\n}) => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true,\n    className: styles.toggleBtn,\n    onClick: onToggleAdvancedZScoreFields\n  }, showAdvancedZScoreFields ? i18n.t('Hide advanced options') : i18n.t('Show advanced options')), showAdvancedZScoreFields && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.optionalDatepickerContainer\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onDataStartDateChange,\n    date: dataStartDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('Data start date'),\n    clearable: true\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.optionalDatepickerContainer\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: date => onDataEndDateChange(date),\n    date: dataEndDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('Data end date'),\n    clearable: true\n  })), /*#__PURE__*/React.createElement(SelectField, {\n    style: jsPageStyles.inputForm,\n    floatingLabelText: i18n.t('Sort by'),\n    onChange: onOrderByChange,\n    value: orderBy\n  }, /*#__PURE__*/React.createElement(MenuItem\n  /* API uses Z-Score for both modified and regular Z-score\n      But show the algorithm selected to user */\n  , {\n    value: Z_SCORE,\n    primaryText: ALGORITHM_TO_LABEL_MAP[algorithm]\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    value: MEAN_ABS_DEV,\n    primaryText: algorithm === Z_SCORE ? i18n.t('Absolute Deviation from Mean') : i18n.t('Absolute Deviation from Median')\n  }))));\n};\n\nZScoreFields.propTypes = {\n  orderBy: PropTypes.string.isRequired,\n  showAdvancedZScoreFields: PropTypes.bool.isRequired,\n  onDataEndDateChange: PropTypes.func.isRequired,\n  onDataStartDateChange: PropTypes.func.isRequired,\n  onOrderByChange: PropTypes.func.isRequired,\n  onToggleAdvancedZScoreFields: PropTypes.func.isRequired,\n  algorithm: PropTypes.string,\n  dataEndDate: PropTypes.string,\n  dataStartDate: PropTypes.string\n};\nexport default ZScoreFields;","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, CalendarInput } from '@dhis2/ui';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport AvailableDataSetsSelect from '../../../components/AvailableDataSetsSelect/AvailableDataSetsSelect.js';\nimport AvailableOrganisationUnitsTree from '../../../components/AvailableOrganisationUnitsTree/AvailableOrganisationUnitsTree.js';\nimport cssPageStyles from '../../Page.module.css';\nimport jsPageStyles from '../../PageStyles.js';\nimport { Z_SCORE_ALGORITHMS, ALGORITHM_TO_LABEL_MAP } from '../constants.js';\nimport ThresholdField from './ThresholdField.js';\nimport ZScoreFields from './ZScoreFields.js';\n\nconst Form = ({\n  onSubmit,\n  valid,\n  loading,\n  startDate,\n  endDate,\n  algorithm,\n  showAdvancedZScoreFields,\n  onToggleAdvancedZScoreFields,\n  onAlgorithmChange,\n  threshold,\n  onThresholdChange,\n  orderBy,\n  onOrderByChange,\n  dataStartDate,\n  dataEndDate,\n  onDataStartDateChange,\n  onDataEndDateChange,\n  dataSetIds,\n  onDataSetsOnChange,\n  onOrganisationUnitChange,\n  maxResults,\n  onMaxResultsChange,\n  onStartDateChange,\n  onEndDateChange\n}) => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 col-lg-4\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: cssPageStyles.formLabel\n  }, i18n.t('Data set')), /*#__PURE__*/React.createElement(AvailableDataSetsSelect, {\n    selected: dataSetIds,\n    onChange: onDataSetsOnChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 col-lg-4\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: cssPageStyles.formLabel\n  }, i18n.t('Organisation units')), /*#__PURE__*/React.createElement(AvailableOrganisationUnitsTree, {\n    multiselect: true,\n    onChange: onOrganisationUnitChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 col-lg-4\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.datepickers\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onStartDateChange,\n    date: startDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('Start date')\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.datepickers\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onEndDateChange,\n    date: endDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('End date')\n  })), /*#__PURE__*/React.createElement(SelectField, {\n    style: jsPageStyles.inputForm,\n    floatingLabelText: i18n.t('Algorithm'),\n    onChange: onAlgorithmChange,\n    value: algorithm\n  }, Object.keys(ALGORITHM_TO_LABEL_MAP).map(algo => /*#__PURE__*/React.createElement(MenuItem, {\n    key: algo,\n    value: algo,\n    primaryText: i18n.t(ALGORITHM_TO_LABEL_MAP[algo])\n  }))), Z_SCORE_ALGORITHMS.has(algorithm) && /*#__PURE__*/React.createElement(ThresholdField, {\n    threshold: threshold,\n    onChange: onThresholdChange\n  }), /*#__PURE__*/React.createElement(SelectField, {\n    style: jsPageStyles.inputForm,\n    floatingLabelText: i18n.t('Max results'),\n    onChange: onMaxResultsChange,\n    value: maxResults\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: 100,\n    primaryText: \"100\"\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 200,\n    primaryText: \"200\"\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 500,\n    primaryText: \"500\"\n  })), Z_SCORE_ALGORITHMS.has(algorithm) && /*#__PURE__*/React.createElement(ZScoreFields, {\n    algorithm: algorithm,\n    showAdvancedZScoreFields: showAdvancedZScoreFields,\n    onToggleAdvancedZScoreFields: onToggleAdvancedZScoreFields,\n    orderBy: orderBy,\n    onOrderByChange: onOrderByChange,\n    dataStartDate: dataStartDate,\n    dataEndDate: dataEndDate,\n    onDataStartDateChange: onDataStartDateChange,\n    onDataEndDateChange: onDataEndDateChange\n  }))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    className: cssPageStyles.mainButton,\n    disabled: !valid || loading,\n    onClick: onSubmit\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Processing...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Start')));\n};\n\nForm.propTypes = {\n  algorithm: PropTypes.string.isRequired,\n  dataSetIds: PropTypes.array.isRequired,\n  endDate: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  maxResults: PropTypes.number.isRequired,\n  orderBy: PropTypes.string.isRequired,\n  showAdvancedZScoreFields: PropTypes.bool.isRequired,\n  startDate: PropTypes.string.isRequired,\n  threshold: PropTypes.number.isRequired,\n  valid: PropTypes.bool.isRequired,\n  onAlgorithmChange: PropTypes.func.isRequired,\n  onDataEndDateChange: PropTypes.func.isRequired,\n  onDataSetsOnChange: PropTypes.func.isRequired,\n  onDataStartDateChange: PropTypes.func.isRequired,\n  onEndDateChange: PropTypes.func.isRequired,\n  onMaxResultsChange: PropTypes.func.isRequired,\n  onOrderByChange: PropTypes.func.isRequired,\n  onOrganisationUnitChange: PropTypes.func.isRequired,\n  onStartDateChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onThresholdChange: PropTypes.func.isRequired,\n  onToggleAdvancedZScoreFields: PropTypes.func.isRequired,\n  dataEndDate: PropTypes.string,\n  dataStartDate: PropTypes.string\n};\nexport default Form;","import { Checkbox, TableRow, TableRowColumn } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../../components/FormattedNumber/FormattedNumber.js';\nimport cssPageStyles from '../../Page.module.css';\nimport jsPageStyles from '../../PageStyles.js';\n\nconst ElementRow = ({\n  element,\n  isZScoreAlgorithm,\n  onToggleCheckbox\n}) => /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableRowColumn, null, /*#__PURE__*/React.createElement(\"span\", {\n  title: element.displayName\n}, element.displayName)), /*#__PURE__*/React.createElement(TableRowColumn, null, element.pe), /*#__PURE__*/React.createElement(TableRowColumn, null, /*#__PURE__*/React.createElement(\"span\", {\n  title: element.ouName\n}, element.ouName)), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.value,\n  minimumFractionDigits: 0\n})), isZScoreAlgorithm && /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.zScore\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.absDev,\n  minimumFractionDigits: 0\n})), isZScoreAlgorithm && /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.stdDev\n})), isZScoreAlgorithm && /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.mean || element.median,\n  minimumFractionDigits: 0\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.lowerBound,\n  minimumFractionDigits: 0\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.numericalRow\n}, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.upperBound,\n  minimumFractionDigits: 0\n})), /*#__PURE__*/React.createElement(TableRowColumn, {\n  className: cssPageStyles.centerFlex\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: cssPageStyles.checkboxWrapper\n}, /*#__PURE__*/React.createElement(Checkbox, {\n  checked: element.marked,\n  onCheck: () => onToggleCheckbox(element),\n  iconStyle: jsPageStyles.iconColor\n}))));\n\nElementRow.propTypes = {\n  element: PropTypes.object.isRequired,\n  isZScoreAlgorithm: PropTypes.bool.isRequired,\n  onToggleCheckbox: PropTypes.func.isRequired\n};\nexport default ElementRow;","import i18n from '@dhis2/d2-i18n';\nimport classNames from 'classnames';\nimport { Table, TableBody, TableHeader, TableHeaderColumn, TableRow } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport DownloadAs from '../../../components/DownloadAs/DownloadAs.js';\nimport cssPageStyles from '../../Page.module.css';\nimport { Z_SCORE_ALGORITHMS, ALGORITHM_TO_LABEL_MAP, Z_SCORE } from '../constants.js';\nimport ElementRow from './ElementRow.js';\nimport styles from './OutlierAnalysisTable.module.css';\n\nconst OutlierAnalyisTable = ({\n  csvQueryStr,\n  elements,\n  onToggleCheckbox,\n  algorithm\n}) => {\n  const isZScoreAlgorithm = Z_SCORE_ALGORITHMS.has(algorithm);\n  const downloadLink = /*#__PURE__*/React.createElement(DownloadAs, {\n    fileTypes: ['csv'],\n    endpoint: '/outlierDetection',\n    queryStr: csvQueryStr\n  });\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.cardHeader\n  }, downloadLink), /*#__PURE__*/React.createElement(Table, {\n    selectable: false,\n    className: classNames(cssPageStyles.appTable, styles.outlierAnalysisTable)\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    displaySelectAll: false,\n    adjustForCheckbox: false,\n    enableSelectAll: false\n  }, /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableHeaderColumn, null, i18n.t('Data Element')), /*#__PURE__*/React.createElement(TableHeaderColumn, null, i18n.t('Period')), /*#__PURE__*/React.createElement(TableHeaderColumn, null, i18n.t('Organisation Unit')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Value')), isZScoreAlgorithm && /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, ALGORITHM_TO_LABEL_MAP[algorithm]), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Deviation')), isZScoreAlgorithm && /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Std Dev')), isZScoreAlgorithm && /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, algorithm === Z_SCORE ? i18n.t('Mean') : i18n.t('Median')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Min')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.numericalRow\n  }, i18n.t('Max')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    className: cssPageStyles.center\n  }, i18n.t('Follow-up')))), /*#__PURE__*/React.createElement(TableBody, {\n    displayRowCheckbox: false,\n    stripedRows: false\n  }, elements.map(element => /*#__PURE__*/React.createElement(ElementRow, {\n    key: element.key,\n    element: element,\n    isZScoreAlgorithm: isZScoreAlgorithm,\n    onToggleCheckbox: onToggleCheckbox\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(cssPageStyles.cardFooter, cssPageStyles.end)\n  }, downloadLink));\n};\n\nOutlierAnalyisTable.propTypes = {\n  algorithm: PropTypes.oneOf(Array.from(Z_SCORE_ALGORITHMS)).isRequired,\n  csvQueryStr: PropTypes.string.isRequired,\n  elements: PropTypes.array.isRequired,\n  onToggleCheckbox: PropTypes.func.isRequired\n};\nexport default OutlierAnalyisTable;","import { useConfig } from '@dhis2/app-runtime';\nimport { useState } from 'react';\nimport { getCalendarDate } from '../../helpers/dates.js';\nimport { DEFAULT_THRESHOLD, DEFAULT_ALGORITHM, DEFAULT_MAX_RESULTS, DEFAULT_ORDER_BY } from './constants.js';\n\nconst useFormState = () => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  const [startDate, setStartDate] = useState(getCalendarDate(calendar, {\n    months: -3\n  }));\n  const [endDate, setEndDate] = useState(getCalendarDate(calendar));\n  const [organisationUnitIds, setOrganisationUnitIds] = useState([]);\n  const [algorithm, setAlgorithm] = useState(DEFAULT_ALGORITHM);\n  const [showAdvancedZScoreFields, setShowAdvancedZScoreFields] = useState(false);\n  const [threshold, setThreshold] = useState(DEFAULT_THRESHOLD);\n  const [orderBy, setOrderBy] = useState(DEFAULT_ORDER_BY);\n  const [dataStartDate, setDataStartDate] = useState(null);\n  const [dataEndDate, setDataEndDate] = useState(null);\n  const [dataSetIds, setDataSetIds] = useState([]);\n  const [maxResults, setMaxResults] = useState(DEFAULT_MAX_RESULTS);\n\n  const handleStartDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setStartDate(date);\n  };\n\n  const handleEndDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setEndDate(date);\n  };\n\n  const handleAlgorithmChange = (event, index, value) => {\n    setAlgorithm(value);\n  };\n\n  const handleToggleAdvancedZScoreFields = () => {\n    if (showAdvancedZScoreFields) {\n      setDataStartDate(null);\n      setDataEndDate(null);\n      setOrderBy(DEFAULT_ORDER_BY);\n    }\n\n    setShowAdvancedZScoreFields(!showAdvancedZScoreFields);\n  };\n\n  const handleThresholdChange = (event, index, value) => {\n    setThreshold(value);\n  };\n\n  const handleOrderByChange = (event, index, value) => {\n    setOrderBy(value);\n  };\n\n  const handleDataStartDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setDataStartDate(date);\n  };\n\n  const handleDataEndDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setDataEndDate(date);\n  };\n\n  const handleDataSetsChange = ({\n    selected\n  }) => {\n    setDataSetIds(selected);\n  };\n\n  const handleMaxResultsChange = (event, index, value) => {\n    setMaxResults(value);\n  };\n\n  return {\n    organisationUnitIds,\n    handleOrganisationUnitChange: setOrganisationUnitIds,\n    startDate,\n    handleStartDateChange,\n    endDate,\n    handleEndDateChange,\n    algorithm,\n    handleAlgorithmChange,\n    showAdvancedZScoreFields,\n    handleToggleAdvancedZScoreFields,\n    threshold,\n    handleThresholdChange,\n    orderBy,\n    handleOrderByChange,\n    dataStartDate,\n    handleDataStartDateChange,\n    dataEndDate,\n    handleDataEndDateChange,\n    dataSetIds,\n    handleDataSetsChange,\n    maxResults,\n    handleMaxResultsChange\n  };\n};\n\nexport default useFormState;","import { useDataQuery, useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card } from '@dhis2/ui';\nimport queryString from 'query-string';\nimport React, { useState } from 'react';\nimport MaxResultsAlertBar from '../../components/MaxResultsAlertBar/MaxResultsAlertBar.js';\nimport PageHeader from '../../components/PageHeader/PageHeader.js';\nimport { useSidebar } from '../../components/Sidebar/SidebarContext.js';\nimport { apiConf } from '../../server.conf.js';\nimport cssPageStyles from '../Page.module.css';\nimport { Z_SCORE_ALGORITHMS } from './constants.js';\nimport convertElementFromApiResponse from './convert-element-from-api-response.js';\nimport Form from './Form/Form.js';\nimport OutlierAnalyisTable from './OutlierAnalysisTable/OutlierAnalysisTable.js';\nimport useFormState from './use-form-state.js';\nconst query = {\n  outliers: {\n    resource: 'outlierDetection',\n    params: params => params\n  }\n};\nconst markOutlierMutation = {\n  resource: '/dataValues/followup',\n  type: 'update',\n  data: data => data\n};\n\nconst OutlierDetection = () => {\n  const sidebar = useSidebar();\n  const [tableVisible, setTableVisible] = useState(false);\n  const [elements, setElements] = useState([]);\n  const [csvQueryStr, setCsvQueryStr] = useState(null);\n  const {\n    organisationUnitIds,\n    handleOrganisationUnitChange,\n    startDate,\n    handleStartDateChange,\n    endDate,\n    handleEndDateChange,\n    algorithm,\n    handleAlgorithmChange,\n    showAdvancedZScoreFields,\n    handleToggleAdvancedZScoreFields,\n    threshold,\n    handleThresholdChange,\n    orderBy,\n    handleOrderByChange,\n    dataStartDate,\n    handleDataStartDateChange,\n    dataEndDate,\n    handleDataEndDateChange,\n    dataSetIds,\n    handleDataSetsChange,\n    maxResults,\n    handleMaxResultsChange\n  } = useFormState();\n  const noValuesFoundAlert = useAlert(i18n.t('No values found'), {\n    success: true\n  });\n  const successfulMarkAlert = useAlert(({\n    marked\n  }) => marked ? i18n.t('Marked for follow-up') : i18n.t('Unmarked for follow-up'), {\n    success: true,\n    duration: 2e3\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => (error === null || error === void 0 ? void 0 : error.message) || i18n.t('An unexpected error happened during analysis'), {\n    critical: true\n  });\n  const {\n    loading,\n    refetch: fetchOutliers\n  } = useDataQuery(query, {\n    lazy: true,\n    onComplete: data => {\n      const elements = data.outliers.outlierValues.map(convertElementFromApiResponse);\n      setElements(elements);\n\n      if (elements.length > 0) {\n        showTable();\n      } else {\n        noValuesFoundAlert.show();\n      }\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [markOutlier] = useDataMutation(markOutlierMutation, {\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n\n  const showForm = () => {\n    setTableVisible(false);\n    setCsvQueryStr(null);\n    sidebar.show();\n  };\n\n  const showTable = () => {\n    setTableVisible(true);\n    sidebar.hide();\n  };\n\n  const handleStart = () => {\n    const params = {\n      ds: dataSetIds,\n      ou: organisationUnitIds,\n      startDate,\n      endDate,\n      algorithm,\n      maxResults,\n      orderBy,\n      dataStartDate: null,\n      // needed to clear previous values\n      dataEndDate: null\n    };\n\n    if (Z_SCORE_ALGORITHMS.has(algorithm)) {\n      params.threshold = threshold;\n\n      if (dataStartDate) {\n        console.log('has startDate', dataStartDate);\n        params.dataStartDate = dataStartDate;\n      }\n\n      if (dataEndDate) {\n        params.dataEndDate = dataEndDate;\n      }\n    }\n\n    fetchOutliers(params);\n    setCsvQueryStr(queryString.stringify(params));\n  };\n\n  const handleToggleCheckbox = async element => {\n    const currentElement = elements.find(({\n      key\n    }) => key === element.key);\n    await markOutlier({\n      dataElement: currentElement.de,\n      period: currentElement.pe,\n      orgUnit: currentElement.ou,\n      categoryOptionCombo: currentElement.coc || null,\n      attributeOptionCombo: currentElement.aoc || null,\n      followup: !currentElement.marked\n    });\n    const newMarked = !element.marked;\n    setElements(elements.map(e => {\n      if (e.key === element.key) {\n        return { ...e,\n          marked: newMarked\n        };\n      } else {\n        return e;\n      }\n    }));\n    successfulMarkAlert.show({\n      marked: newMarked\n    });\n  };\n\n  const formValid = !!(startDate && endDate && organisationUnitIds.length > 0 && threshold && dataSetIds.length > 0 && startDate < endDate);\n  const shouldShowMaxResultsAlertBar = tableVisible && elements.length >= apiConf.results.analysis.limit;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18n.t('Outlier Detection'),\n    onBack: tableVisible ? showForm : null\n  }), /*#__PURE__*/React.createElement(MaxResultsAlertBar, {\n    show: shouldShowMaxResultsAlertBar\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: cssPageStyles.card\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: tableVisible ? 'none' : 'block'\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleStart,\n    valid: formValid,\n    loading: loading,\n    onOrganisationUnitChange: handleOrganisationUnitChange,\n    startDate: startDate,\n    onStartDateChange: handleStartDateChange,\n    endDate: endDate,\n    onEndDateChange: handleEndDateChange,\n    algorithm: algorithm,\n    onAlgorithmChange: handleAlgorithmChange,\n    showAdvancedZScoreFields: showAdvancedZScoreFields,\n    onToggleAdvancedZScoreFields: handleToggleAdvancedZScoreFields,\n    threshold: threshold,\n    onThresholdChange: handleThresholdChange,\n    orderBy: orderBy,\n    onOrderByChange: handleOrderByChange,\n    dataStartDate: dataStartDate,\n    onDataStartDateChange: handleDataStartDateChange,\n    dataEndDate: dataEndDate,\n    onDataEndDateChange: handleDataEndDateChange,\n    dataSetIds: dataSetIds,\n    onDataSetsOnChange: handleDataSetsChange,\n    maxResults: maxResults,\n    onMaxResultsChange: handleMaxResultsChange\n  })), tableVisible && csvQueryStr && /*#__PURE__*/React.createElement(OutlierAnalyisTable, {\n    algorithm: algorithm,\n    csvQueryStr: csvQueryStr,\n    elements: elements,\n    onToggleCheckbox: handleToggleCheckbox\n  })));\n};\n\nexport default OutlierDetection;","const generateElementKey = e => `${e.validationRuleId}-${e.periodId}-${e.organisationUnitId}-${e.attributeOptionComboId}`;\n\nconst convertElementFromApiResponse = e => ({\n  key: generateElementKey(e),\n  validationRuleId: e.validationRuleId,\n  attributeOptionCombo: e.attributeOptionComboDisplayName,\n  attributeOptionComboId: e.attributeOptionComboId,\n  organisation: e.organisationUnitDisplayName,\n  organisationUnitId: e.organisationUnitId,\n  period: e.periodDisplayName,\n  periodId: e.periodId,\n  importance: e.importance,\n  validationRule: e.validationRuleDescription,\n  leftValue: e.leftSideValue,\n  operator: e.operator,\n  rightValue: e.rightSideValue\n});\n\nexport default convertElementFromApiResponse;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nexport const ALL_VALIDATION_RULE_GROUPS_ID = '-1';\nconst ALL_VALIDATION_RULE_GROUPS_OPTION = {\n  id: ALL_VALIDATION_RULE_GROUPS_ID,\n  displayName: i18n.t('[All Validation Rules]')\n};\nconst query = {\n  validationRuleGroups: {\n    resource: 'validationRuleGroups',\n    params: {\n      fields: 'id,displayName',\n      paging: false\n    }\n  }\n};\n\nconst ValidationRuleGroupsSelect = ({\n  onChange\n}) => {\n  const [selected, setSelected] = useState(ALL_VALIDATION_RULE_GROUPS_ID);\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n  const validationRuleGroups = data ? [ALL_VALIDATION_RULE_GROUPS_OPTION, ...data.validationRuleGroups.validationRuleGroups] : [ALL_VALIDATION_RULE_GROUPS_OPTION];\n\n  const handleChange = ({\n    selected\n  }) => {\n    setSelected(selected);\n    onChange(selected);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SingleSelectField, {\n    label: i18n.t('Validation Rule Group'),\n    selected: selected,\n    loading: loading,\n    error: error,\n    filterable: true,\n    onChange: handleChange\n  }, validationRuleGroups.map(item => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: item.id,\n    label: item.displayName,\n    value: item.id\n  }))), error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, i18n.t('Error loading validation rule groups: {{- error}}', {\n    nsSeparator: '-:-',\n    error\n  })));\n};\n\nValidationRuleGroupsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired\n};\nexport default ValidationRuleGroupsSelect;","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Checkbox, CircularLoader, CalendarInput } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport AvailableOrganisationUnitsTree from '../../components/AvailableOrganisationUnitsTree/AvailableOrganisationUnitsTree.js';\nimport cssPageStyles from '../Page.module.css';\nimport styles from './Form.module.css';\nimport ValidationRuleGroupsSelect from './ValidationRuleGroupsSelect.js';\n\nconst Form = ({\n  onSubmit,\n  valid,\n  loading,\n  onOrganisationUnitChange,\n  startDate,\n  onStartDateChange,\n  endDate,\n  onEndDateChange,\n  onValidationRuleGroupChange,\n  sendNotfications,\n  onSendNotificationsChange,\n  persistNewResults,\n  onPersistNewResultsChange\n}) => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.formLabel\n  }, i18n.t('Parent organisation unit')), /*#__PURE__*/React.createElement(AvailableOrganisationUnitsTree, {\n    onChange: onOrganisationUnitChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.datepickers\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onStartDateChange,\n    date: startDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('Start date')\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.datepickers\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    onDateSelect: onEndDateChange,\n    date: endDate,\n    calendar: calendar,\n    locale: \"en\",\n    label: i18n.t('End date')\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ValidationRuleGroupsSelect, {\n    onChange: onValidationRuleGroupChange\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.checkboxes\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Send Notifications'),\n    checked: sendNotfications,\n    onChange: onSendNotificationsChange\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Persist new results'),\n    checked: persistNewResults,\n    onChange: onPersistNewResultsChange\n  })))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    className: cssPageStyles.mainButton,\n    disabled: !valid || loading,\n    onClick: onSubmit\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Validating...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Validate')));\n};\n\nForm.propTypes = {\n  endDate: PropTypes.string.isRequired,\n  loading: PropTypes.bool.isRequired,\n  persistNewResults: PropTypes.bool.isRequired,\n  sendNotfications: PropTypes.bool.isRequired,\n  startDate: PropTypes.string.isRequired,\n  valid: PropTypes.bool.isRequired,\n  onEndDateChange: PropTypes.func.isRequired,\n  onOrganisationUnitChange: PropTypes.func.isRequired,\n  onPersistNewResultsChange: PropTypes.func.isRequired,\n  onSendNotificationsChange: PropTypes.func.isRequired,\n  onStartDateChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onValidationRuleGroupChange: PropTypes.func.isRequired\n};\nexport default Form;","import { useConfig } from '@dhis2/app-runtime';\nimport { useState } from 'react';\nimport { getCalendarDate } from '../../helpers/dates.js';\nimport { ALL_VALIDATION_RULE_GROUPS_ID } from './ValidationRuleGroupsSelect.js';\n\nconst useFormState = () => {\n  const {\n    systemInfo = {}\n  } = useConfig();\n  const {\n    calendar = 'gregory'\n  } = systemInfo;\n  const [organisationUnitId, setOrganisationUnitId] = useState(null);\n  const [startDate, setStartDate] = useState(getCalendarDate(calendar, {\n    months: -3\n  }));\n  const [endDate, setEndDate] = useState(getCalendarDate(calendar));\n  const [validationRuleGroupId, setValidationRuleGroupId] = useState(ALL_VALIDATION_RULE_GROUPS_ID);\n  const [sendNotfications, setSendNotifications] = useState(false);\n  const [persistNewResults, setPersistNewResults] = useState(false);\n\n  const handleStartDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setStartDate(date);\n  };\n\n  const handleEndDateChange = selectedDate => {\n    const date = selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.calendarDateString;\n    setEndDate(date);\n  };\n\n  const handleSendNotificationsChange = ({\n    checked\n  }) => {\n    setSendNotifications(checked);\n  };\n\n  const handlePersistNewResultsChange = ({\n    checked\n  }) => {\n    setPersistNewResults(checked);\n  };\n\n  return {\n    organisationUnitId,\n    handleOrganisationUnitChange: setOrganisationUnitId,\n    startDate,\n    handleStartDateChange,\n    endDate,\n    handleEndDateChange,\n    validationRuleGroupId,\n    handleValidationRuleGroupChange: setValidationRuleGroupId,\n    sendNotfications,\n    handleSendNotificationsChange,\n    persistNewResults,\n    handlePersistNewResultsChange\n  };\n};\n\nexport default useFormState;","import i18n from '@dhis2/d2-i18n';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './ValidationRulesDetails.module.css';\n\nconst Result = ({\n  rule\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: classNames('row', 'results-row', styles.sectionBox)\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: classNames('col-xs-12', styles.sectionTitle)\n}, i18n.t('VALIDATIONS RESULT DETAILS')), /*#__PURE__*/React.createElement(\"div\", {\n  className: classNames('col-xs-12', styles.sectionSubTitle)\n}, i18n.t('VALIDATION RULE')), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-xs-3\"\n}, i18n.t('Name')), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-xs-9\"\n}, rule.displayName), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-xs-3\"\n}, i18n.t('Description')), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"col-xs-9\"\n}, rule.displayDescription));\n\nResult.propTypes = {\n  rule: PropTypes.object.isRequired\n};\nexport default Result;","import i18n from '@dhis2/d2-i18n';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../../components/FormattedNumber/FormattedNumber.js';\nimport cssPageStyles from '../../Page.module.css';\nimport styles from './ValidationRulesDetails.module.css';\n\nconst Section = ({\n  side,\n  elements,\n  classNameRow\n}) => {\n  if (!elements || elements.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('row', styles.sectionBox)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('col-xs-12', styles.sectionTitle)\n    }, side), /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('col-xs-12', cssPageStyles.center)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noData\n    }, i18n.t('no data available'))));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('row', classNameRow, styles.sectionBox)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('col-xs-12', styles.sectionTitle)\n  }, side), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('col-xs-10', styles.sectionSubTitle)\n  }, i18n.t('DATA ELEMENT')), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('col-xs-2', styles.sectionSubTitle, cssPageStyles.right)\n  }, i18n.t('VALUE')), elements.map(element => /*#__PURE__*/React.createElement(\"div\", {\n    key: element.name,\n    className: 'col-xs-12'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'row'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'col-xs-10'\n  }, element.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('col-xs-2', cssPageStyles.right)\n  }, element.value ? /*#__PURE__*/React.createElement(FormattedNumber, {\n    value: Number(element.value)\n  }) : '-')))));\n};\n\nSection.propTypes = {\n  classNameRow: PropTypes.string.isRequired,\n  side: PropTypes.string.isRequired,\n  elements: PropTypes.array\n};\nexport default Section;","import { useDataQuery, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, Tooltip, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip } from '@dhis2/ui';\nimport { FontIcon } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport Result from './Result.js';\nimport Section from './Section.js';\nconst query = {\n  rule: {\n    resource: 'validationRules',\n    id: ({\n      validationRuleId\n    }) => validationRuleId\n  },\n  expression: {\n    resource: 'dataAnalysis/validationRulesExpression',\n    params: params => params\n  }\n};\n\nconst ValidationRulesDetails = ({\n  attributeOptionComboId,\n  organisationUnitId,\n  periodId,\n  validationRuleId\n}) => {\n  const [detailsVisible, setDetailsVisible] = useState(false);\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const {\n    loading,\n    data,\n    refetch: fetchDetails\n  } = useDataQuery(query, {\n    lazy: true,\n    variables: {\n      validationRuleId,\n      periodId,\n      organisationUnitId,\n      attributeOptionComboId\n    },\n    onComplete: () => {\n      handleModalOpen();\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n\n  const handleModalOpen = () => {\n    setDetailsVisible(true);\n  };\n\n  const handleModalClose = () => {\n    setDetailsVisible(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Show details'),\n    openDelay: 0,\n    closeDelay: 0\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    icon: loading ? /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }) : /*#__PURE__*/React.createElement(FontIcon, {\n      className: \"material-icons\"\n    }, \"info\"),\n    disabled: loading,\n    onClick: data ? handleModalOpen : fetchDetails\n  })), detailsVisible && data && /*#__PURE__*/React.createElement(Modal, {\n    onClose: handleModalClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Validation Details')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(Result, {\n    rule: data.rule\n  }), /*#__PURE__*/React.createElement(Section, {\n    side: i18n.t('LEFT SIDE'),\n    elements: data.expression.leftSide,\n    classNameRow: \"left-side-row\"\n  }), /*#__PURE__*/React.createElement(Section, {\n    side: i18n.t('RIGHT SIDE'),\n    elements: data.expression.rightSide,\n    classNameRow: \"right-side-row\"\n  })), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleModalClose\n  }, i18n.t('Close'))))));\n};\n\nValidationRulesDetails.propTypes = {\n  attributeOptionComboId: PropTypes.string.isRequired,\n  organisationUnitId: PropTypes.string.isRequired,\n  periodId: PropTypes.string.isRequired,\n  validationRuleId: PropTypes.string.isRequired\n};\nexport default ValidationRulesDetails;","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './TableCellContent.module.css';\n\nconst TableCellContent = ({\n  className,\n  size,\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: cx(styles.tableCellContent, className, {\n    [styles[`tableCellContent-${size}`]]: size\n  })\n}, children);\n\nTableCellContent.propTypes = {\n  children: PropTypes.any,\n  className: PropTypes.string,\n  size: PropTypes.oneOf(['narrow', 'medium', 'wide'])\n};\nexport default TableCellContent;","import { TableRow, TableRowColumn } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../../components/FormattedNumber/FormattedNumber.js';\nimport ValidationRulesDetails from '../ValidationRulesDetails/ValidationRulesDetails.js';\nimport styles from './ElementRow.module.css';\nimport TableCellContent from './TableCellContent.js';\n\nconst ElementRow = ({\n  element,\n  shouldDisplayAttributeOptionCombo\n}) => /*#__PURE__*/React.createElement(TableRow, {\n  key: element.key\n}, /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.organisation\n}, /*#__PURE__*/React.createElement(TableCellContent, null, element.organisation)), shouldDisplayAttributeOptionCombo && /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.attributeOptionCombo\n}, /*#__PURE__*/React.createElement(TableCellContent, {\n  size: \"wide\"\n}, element.attributeOptionCombo)), /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.period\n}, /*#__PURE__*/React.createElement(TableCellContent, null, element.period)), /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.importance\n}, /*#__PURE__*/React.createElement(TableCellContent, null, element.importance)), /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.validationRule\n}, /*#__PURE__*/React.createElement(TableCellContent, {\n  size: 'medium'\n}, element.validationRule)), /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.leftValue\n}, /*#__PURE__*/React.createElement(TableCellContent, null, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.leftValue\n}))), /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.operator\n}, /*#__PURE__*/React.createElement(TableCellContent, {\n  className: styles.operator\n}, element.operator)), /*#__PURE__*/React.createElement(TableRowColumn, {\n  title: element.rightValue\n}, /*#__PURE__*/React.createElement(TableCellContent, null, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.rightValue\n}))), /*#__PURE__*/React.createElement(TableRowColumn, null, /*#__PURE__*/React.createElement(TableCellContent, null, /*#__PURE__*/React.createElement(ValidationRulesDetails, {\n  validationRuleId: element.validationRuleId,\n  periodId: element.periodId,\n  organisationUnitId: element.organisationUnitId,\n  attributeOptionComboId: element.attributeOptionComboId\n}))));\n\nElementRow.propTypes = {\n  element: PropTypes.object.isRequired,\n  shouldDisplayAttributeOptionCombo: PropTypes.bool.isRequired\n};\nexport default ElementRow;","import i18n from '@dhis2/d2-i18n';\nimport classNames from 'classnames';\nimport { Table, TableBody, TableHeader, TableHeaderColumn, TableRow } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport DownloadAs from '../../../components/DownloadAs/DownloadAs.js';\nimport { apiConf } from '../../../server.conf.js';\nimport cssPageStyles from '../../Page.module.css';\nimport ElementRow from './ElementRow.js';\nimport styles from './ValidationRulesAnalysisTable.module.css';\n\nconst ValidationRulesAnalysisTable = ({\n  elements\n}) => {\n  const shouldDisplayAttributeOptionCombo = elements.some(e => e.attributeOptionCombo && e.attributeOptionCombo !== 'default');\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cssPageStyles.cardHeader\n  }, /*#__PURE__*/React.createElement(DownloadAs, {\n    endpoint: apiConf.endpoints.validationRulesReport\n  })), /*#__PURE__*/React.createElement(Table, {\n    selectable: false,\n    className: classNames(cssPageStyles.appTable, styles.validationTable),\n    fixedHeader: false,\n    bodyStyle: {\n      overflowX: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    displaySelectAll: false,\n    adjustForCheckbox: false,\n    enableSelectAll: false\n  }, /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Organisation Unit')\n  }, i18n.t('Organisation Unit')), shouldDisplayAttributeOptionCombo && /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Attribute Option Combination')\n  }, i18n.t('Attr. Opt. Combo')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Period')\n  }, i18n.t('Period')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Importance')\n  }, i18n.t('Importance')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Validation Rule')\n  }, i18n.t('Validation Rule')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Value')\n  }, i18n.t('Value')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Operator')\n  }, i18n.t('Operator')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Value')\n  }, i18n.t('Value')), /*#__PURE__*/React.createElement(TableHeaderColumn, {\n    title: i18n.t('Details')\n  }, i18n.t('Details')))), /*#__PURE__*/React.createElement(TableBody, {\n    displayRowCheckbox: false,\n    stripedRows: false\n  }, elements.map(element => /*#__PURE__*/React.createElement(ElementRow, {\n    key: element.key,\n    element: element,\n    shouldDisplayAttributeOptionCombo: shouldDisplayAttributeOptionCombo\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(cssPageStyles.cardFooter, cssPageStyles.end)\n  }, /*#__PURE__*/React.createElement(DownloadAs, {\n    endpoint: apiConf.endpoints.validationRulesReport\n  })));\n};\n\nValidationRulesAnalysisTable.propTypes = {\n  elements: PropTypes.array.isRequired\n};\nexport default ValidationRulesAnalysisTable;","import { useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport MaxResultsAlertBar from '../../components/MaxResultsAlertBar/MaxResultsAlertBar.js';\nimport PageHeader from '../../components/PageHeader/PageHeader.js';\nimport { useSidebar } from '../../components/Sidebar/SidebarContext.js';\nimport { apiConf } from '../../server.conf.js';\nimport cssPageStyles from '../Page.module.css';\nimport convertElementFromApiResponse from './convert-element-from-api-response.js';\nimport Form from './Form.js';\nimport useFormState from './use-form-state.js';\nimport { ALL_VALIDATION_RULE_GROUPS_ID } from './ValidationRuleGroupsSelect.js';\nimport ValidationRulesAnalysisTable from './ValidationRulesAnalysisTable/ValidationRulesAnalysisTable.js';\nconst validationMutation = {\n  resource: 'dataAnalysis/validationRules',\n  type: 'create',\n  data: data => data\n};\n\nconst ValidationRulesAnalysis = ({\n  sectionKey\n}) => {\n  const sidebar = useSidebar();\n  const [tableVisible, setTableVisible] = useState(false);\n  const [elements, setElements] = useState([]);\n  const {\n    organisationUnitId,\n    handleOrganisationUnitChange,\n    startDate,\n    handleStartDateChange,\n    endDate,\n    handleEndDateChange,\n    validationRuleGroupId,\n    handleValidationRuleGroupChange,\n    sendNotfications,\n    handleSendNotificationsChange,\n    persistNewResults,\n    handlePersistNewResultsChange\n  } = useFormState();\n  const validationPassedAlert = useAlert(i18n.t('Validation passed successfully'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => (error === null || error === void 0 ? void 0 : error.message) || i18n.t('An unexpected error happened during analysis'), {\n    critical: true\n  });\n  const [validate, {\n    loading\n  }] = useDataMutation(validationMutation, {\n    onComplete: data => {\n      const elements = data.map(convertElementFromApiResponse);\n      setElements(elements);\n\n      if (elements.length > 0) {\n        showTable();\n      } else {\n        validationPassedAlert.show();\n      }\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n\n  const showForm = () => {\n    setTableVisible(false);\n    sidebar.show();\n  };\n\n  const showTable = () => {\n    setTableVisible(true);\n    sidebar.hide();\n  };\n\n  const handleValidate = async () => {\n    const params = {\n      startDate: startDate,\n      endDate: endDate,\n      ou: organisationUnitId,\n      notification: sendNotfications,\n      persist: persistNewResults\n    };\n\n    if (validationRuleGroupId !== ALL_VALIDATION_RULE_GROUPS_ID) {\n      params.vrg = validationRuleGroupId;\n    }\n\n    validate(params);\n  };\n\n  const formValid = !!(startDate && endDate && organisationUnitId && startDate < endDate);\n  const shouldShowMaxResultsAlertBar = tableVisible && elements.length >= apiConf.results.analysis.limit;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18n.t('Validation Rule Analysis'),\n    onBack: tableVisible ? showForm : null,\n    sectionKey: sectionKey\n  }), /*#__PURE__*/React.createElement(MaxResultsAlertBar, {\n    show: shouldShowMaxResultsAlertBar\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: cssPageStyles.card\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: tableVisible ? 'none' : 'block'\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleValidate,\n    valid: formValid,\n    loading: loading,\n    onOrganisationUnitChange: handleOrganisationUnitChange,\n    startDate: startDate,\n    onStartDateChange: handleStartDateChange,\n    endDate: endDate,\n    onEndDateChange: handleEndDateChange,\n    onValidationRuleGroupChange: handleValidationRuleGroupChange,\n    sendNotfications: sendNotfications,\n    onSendNotificationsChange: handleSendNotificationsChange,\n    persistNewResults: persistNewResults,\n    onPersistNewResultsChange: handlePersistNewResultsChange\n  })), tableVisible && /*#__PURE__*/React.createElement(ValidationRulesAnalysisTable, {\n    elements: elements\n  })));\n};\n\nValidationRulesAnalysis.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default ValidationRulesAnalysis;","import i18n from '@dhis2/d2-i18n';\nimport FollowUpAnalysis from './FollowUpAnalysis/FollowUpAnalysis.js';\nimport OutlierDetection from './OutlierDetection/OutlierDetection.js';\nimport ValidationRulesAnalysis from './ValidationRulesAnalysis/ValidationRulesAnalysis.js';\nexport const sections = [{\n  key: 'validationRulesAnalysis',\n  path: '/validation-rules-analysis',\n  component: ValidationRulesAnalysis,\n  info: {\n    label: i18n.t('Validation Rule Analysis'),\n    icon: 'done_all',\n    description: i18n.t('Run validation rules in order to unveil anomalies and errors in the data in the database.'),\n    actionText: i18n.t('Run Validation'),\n    docs: 'validation_rule_analysis'\n  }\n}, {\n  key: 'outlierDetection',\n  path: '/outlier-detection',\n  component: OutlierDetection,\n  info: {\n    label: i18n.t('Outlier detection'),\n    icon: 'show_chart',\n    description: i18n.t('Analyze potential outlier values based on standard deviations or min-max values. Outlier values can be examined and marked for follow-up.'),\n    actionText: i18n.t('Analyze'),\n    docs: 'outlier_detection'\n  }\n}, {\n  key: 'followUpAnalysis',\n  path: '/follow-up-analysis',\n  component: FollowUpAnalysis,\n  info: {\n    label: i18n.t('Follow-Up Analysis'),\n    icon: 'description',\n    description: i18n.t('View or edit data values marked for further follow-up during data entry or analysis.'),\n    actionText: i18n.t('View Data Values'),\n    docs: 'follow_up_analysis'\n  }\n}];\nexport const getDocsKeyForSection = sectionKey => {\n  const section = sections.find(s => s.key === sectionKey);\n  return (section === null || section === void 0 ? void 0 : section.info.docs) || '';\n};\nexport default sections;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card } from '@dhis2/ui';\nimport classNames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './GridSection.module.css';\n\nclass GridSection extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(Link, {\n      className: styles.link,\n      to: this.props.section.path\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classNames('section', styles.gridElement)\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('row', styles.gridTitleBar)\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: classNames('section-title', styles.gridTitleDescription)\n    }, this.props.section.info.label), /*#__PURE__*/React.createElement(FontIcon, {\n      className: classNames('material-icons', 'icon', styles.gridIcon)\n    }, this.props.section.info.icon)), /*#__PURE__*/React.createElement(\"p\", {\n      className: classNames('section-description', 'row', styles.gridDescription)\n    }, this.props.section.info.description)), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-action-text', 'row', styles.gridActionText)\n    }, this.props.section.info.actionText)));\n  }\n\n}\n\n_defineProperty(GridSection, \"propTypes\", {\n  section: PropTypes.shape({\n    info: PropTypes.shape({\n      actionText: PropTypes.string,\n      description: PropTypes.string,\n      icon: PropTypes.string,\n      label: PropTypes.string\n    }),\n    key: PropTypes.string,\n    path: PropTypes.string\n  }).isRequired\n});\n\nexport default GridSection;","import classNames from 'classnames';\nimport React from 'react';\nimport { sections } from '../sections.conf.js';\nimport GridSection from './grid-section/GridSection.js';\nimport styles from './Overview.module.css';\n\nconst Overview = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"row\"\n}, sections.map(section => /*#__PURE__*/React.createElement(\"div\", {\n  key: section.key,\n  className: classNames('col-sm-12 col-md-6 col-lg-4', styles.gridContainer)\n}, /*#__PURE__*/React.createElement(GridSection, {\n  section: section\n}))));\n\nexport default Overview;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\n\nclass NoMatch extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, \"No match for \", /*#__PURE__*/React.createElement(\"code\", null, this.props.location.pathname)));\n  }\n\n}\n\n_defineProperty(NoMatch, \"propTypes\", {\n  location: PropTypes.object.isRequired\n});\n\nexport default NoMatch;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport Overview from '../../pages/Overview/Overview.js';\nimport { sections } from '../../pages/sections.conf.js';\nimport NoMatch from './NoMatch.js';\n\nconst AppRouter = () => {\n  const routes = sections.map(section => {\n    const routeRender = () => {\n      const Page = section.component;\n      return /*#__PURE__*/React.createElement(Page, {\n        sectionKey: section.key\n      });\n    };\n\n    return /*#__PURE__*/React.createElement(Route, {\n      key: section.key,\n      exact: true,\n      path: section.path,\n      render: routeRender\n    });\n  });\n  routes.push( /*#__PURE__*/React.createElement(Route, {\n    key: \"overview\",\n    exact: true,\n    path: \"/\",\n    component: Overview\n  }));\n  /* No Match Route */\n\n  routes.push( /*#__PURE__*/React.createElement(Route, {\n    key: \"no-match-route\",\n    component: NoMatch\n  }));\n  return /*#__PURE__*/React.createElement(\"main\", null, /*#__PURE__*/React.createElement(Switch, null, routes));\n};\n\nexport default AppRouter;","import { MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport styles from './SidebarItem.module.css';\n\nconst SidebarItem = ({\n  label,\n  path\n}) => {\n  const history = useHistory();\n  const isActive = !!useRouteMatch(path);\n\n  const navigateToPath = () => history.push(path);\n\n  const href = history.createHref({\n    pathname: path,\n    search: '',\n    hash: ''\n  });\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: styles.sidebarItem,\n    onClick: navigateToPath,\n    href: href,\n    active: isActive,\n    label: label\n  });\n};\n\nSidebarItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired\n};\nexport default SidebarItem;","import { Menu } from '@dhis2/ui';\nimport React from 'react';\nimport { sections } from '../../pages/sections.conf.js';\nimport SidebarItem from './SidebarItem.js';\n\nconst Sidebar = () => /*#__PURE__*/React.createElement(Menu, null, sections.map(section => /*#__PURE__*/React.createElement(SidebarItem, {\n  key: section.key,\n  label: section.info.label,\n  path: section.path\n})));\n\nexport default Sidebar;","import { useState } from 'react';\n\nconst useSidebar = () => {\n  const [visible, setVisible] = useState(true);\n  return {\n    visible,\n    show: () => {\n      setVisible(true);\n    },\n    hide: () => {\n      setVisible(false);\n    }\n  };\n};\n\nexport default useSidebar;","import classnames from 'classnames';\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport AppRouter from '../AppRouter/AppRouter.js';\nimport Sidebar from '../Sidebar/Sidebar.js';\nimport { SidebarProvider } from '../Sidebar/SidebarContext.js';\nimport styles from './App.module.css';\nimport useSidebar from './use-sidebar.js';\n\nconst App = () => {\n  const sidebar = useSidebar();\n  const history = useHistory();\n  useEffect(() => {\n    // Restore sidebar when user visits different page (which could be\n    // triggered by back button)\n    history.listen(() => {\n      sidebar.show();\n    });\n  }, []);\n  const containerClassName = classnames(styles.container, {\n    [styles.containerWithSidebar]: sidebar.visible\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: containerClassName\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sidebar\n  }, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentWrapper\n  }, /*#__PURE__*/React.createElement(SidebarProvider, {\n    value: sidebar\n  }, /*#__PURE__*/React.createElement(AppRouter, null)))));\n};\n\nexport default App;","import { blue100, blue700, grey100, grey400, orange500, orangeA200, darkBlack, white } from 'material-ui/styles/colors.js';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme.js';\nimport Spacing from 'material-ui/styles/spacing.js';\nimport { fade } from 'material-ui/utils/colorManipulator.js';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: '#004ba0',\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: orangeA200,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\nconst muiTheme = getMuiTheme(theme);\nexport default muiTheme;","// Due to the way translations are handled in src/pages/sections.conf.js,\n// src/locales/index.js must be the first import in this file\nimport './locales/index.js';\nimport './grid.css';\nimport { CssVariables } from '@dhis2/ui';\nimport { MuiThemeProvider } from 'material-ui/styles';\nimport React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport 'material-design-icons-iconfont';\nimport App from './components/App/App.js';\nimport appTheme from './theme.js';\n\nconst AppWrapper = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssVariables, {\n  spacers: true,\n  colors: true\n}), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n  muiTheme: appTheme\n}, /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(App, null))));\n\nexport default AppWrapper;"],"sourceRoot":""}